#
# Author: github.com/luncliff (luncliff@gmail.com)
#
# References
#   https://docs.microsoft.com/en-us/azure/devops/pipelines/process/templates?view=azure-devops#passing-parameters
#

steps:
  - task: ChocolateyCommand@0
    inputs:
      command: "install"
      installPackageId: "ninja"
      installInstallArgs: "--no-progress --yes"

  - task: ChocolateyCommand@0
    inputs:
      command: "install"
      installPackageId: "llvm"
      installInstallArgs: "--no-progress --yes"

  - task: PowerShell@2
    inputs:
      targetType: "inline"
      script: |
        vcpkg install --triplet x64-windows ms-gsl catch2

  - task: BatchScript@1
    inputs:
      filename: "./scripts/build-vs2019-cmake-clang.bat"
    env:
      CXX: clang-cl
      BUILD_TYPE: $(configuration)
      CMAKE_TOOLCHAIN: $(cmake_toolchain)
